plugins {
    id 'org.m2ci.msp.pandocreveal'
}

compileMarkdown {
    markdownFile = file('slides.md')
    htmlFile = file('actual.html')
    bibFile = file('refs.bib')
}

task testCompileMarkdown {
    dependsOn compileMarkdown
    doLast {
        def actualFile = file('actual.html')
        assert actualFile.exists()
        def bibFile = file('refs.bib')
        assert bibFile.exists()
        def expectedFile = file('expected.html')
        assert actualFile.text.contains('(foo 2017)')
    }
}
